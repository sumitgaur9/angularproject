<form [formGroup]="bookAppointmentForm" (ngSubmit)="Save_BookAppointment()">

  <ad-modal [title]="'OTP'" [modalId]="'showBookAppointmentPopup'">
    <ad-modal-body>

      <div class="modal-header" style="height:47px; background: linear-gradient(to right, #39b49a 0%, #1d86df 100%);">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true"
            class="closebtnspan" (click)="CloseModal()">&times;</span></button>
        <p class="cc popupheaderheading"><i class="fa fa-medkit"></i><span style="margin-left:5px"> Welcome
            &nbsp;<span style="color:white">Book Appointment</span></span>
        </p>
      </div>


      <div class="closebtnmodal">
        <button type="button"><span aria-hidden="true" class="closebtntext" (click)="openPatientProfilePopup()"><i
              class="fa fa-pencil" aria-hidden="true"></i>
          </span></button>
      </div>

      <div class="row">

        <!-- <div class="col-md-12">

      <div class="card" style="border: transparent!important;">
        <div class="card-header p-0">
          <div class="bg-info text-white text-center py-2">
            <h3 class="bookappointmentbtn"><i class="fa fa-medkit"></i><span style="margin-left:5px"> Book Appointment</span></h3>
          </div>
        </div>
      </div>
  </div> -->

        <div class="col-md-6">
          <div class="card-body">


            <div class="form-group" *ngIf="visiblePatientNameSelect">
              <label for="exampleFormControlSelect1">Patient Name</label>
              <select class="form-control" formControlName="patientID" (change)="patientNameChangeEvent($event)">
                <option value=""></option>
                <option *ngFor="let opt of patientListData" [value]="opt._id">{{opt.name}}</option>
              </select>
            </div>



            <div class="form-group">
              <div class="input-group mb-2" style="border: 0.1px dashed slategray;" (click)="openPatientProfilePopup()">

                <textarea name="comment" rows="8" cols="100" style="color: slategray;" disabled
                  [value]="textareaValue">Enter text here...</textarea>
              </div>
            </div>






            <div class="form-group">
              <label for="exampleFormControlSelect1">Appointment Type</label>
              <select class="form-control" formControlName="appointmentType">
                <option value=""></option>
                <option *ngFor="let opt of appointmentTypeData" [value]="opt.name">{{opt.name}}</option>
              </select>
            </div>

            <div class="form-group">
              <div class="input-group mb-2">
                <textarea id="Description" name="Description" formControlName="description" rows="4" cols="30"
                  class="form-control" placeholder="Description"></textarea>
              </div>
            </div>

            <!-- <div class="form-group">
        <div class="input-group mb-2">
          <div class="input-group-prepend">
            <div class="input-group-text"><i class="fa fa-user text-info"></i></div>
          </div>
          <input type="text" class="form-control" id="patientNname" name="patientNname"
            placeholder="Patient Name" formControlName="patientNname">
        </div>
      </div>
      
      <div class="form-group">
        <div class="input-group mb-2">
          <div class="input-group-prepend">
            <div class="input-group-text"><i class="fa fa-envelope text-info"></i></div>
          </div>
          <input type="email" class="form-control" id="patientEmail" name="patientEmail"
            placeholder="ejemplo@gmail.com" formControlName="patientEmail">
        </div>
      </div>

      <div class="form-group">
        <div class="input-group mb-2">
          <div class="input-group-prepend">
            <div class="input-group-text"><i class="fa fa-phone text-info"></i></div>
        </div>
          <input type="text" class="form-control" id="patientMob" name="patientMob"
          placeholder="Mobile no" formControlName="patientMob">                            </div>
      </div>
      <div class="form-group">
          <div class="input-group mb-2">
            <div class="input-group-prepend">
              <div class="input-group-text"><i class="fa fa-address-card-o text-info"></i></div>
            </div>
            <input type="text" class="form-control" id="patientAddres" name="patientAddres"
            placeholder="Patient Address" formControlName="patientAddres">                          </div>
        </div>
      <div class="form-group">
        <div class="input-group mb-2">
          <div class="input-group-prepend">
            <div class="input-group-text"><i class="fa fa-thumb-tack text-info"></i></div>
          </div>
          <input type="text" class="form-control" id="patientPIN" name="patientPIN"
          placeholder="Patient PIN" formControlName="patientPIN">                          </div>
      </div>

      <div class="form-group">

        <div class="input-group mb-2">
          <div class="input-group-prepend">
            <div class="input-group-text"><i class="fa fa-calendar text-info"></i></div>
          </div>
          <input class="form-control" type="text" 
          [dpDayPicker]="dayPickerConfig"
          [theme]="'dp-material'"
          formControlName="appointmentDate"
          [mode]="'day'"
          [displayDate]="displayDate"
          placeholder="Appointment Date"/>
                                   </div>
      </div> -->

          </div>
        </div>

        <div class="col-md-6">

          <!-- <div class="form-group">
      <div class="input-group mb-2">
        <div class="input-group-prepend">
          <div class="input-group-text"><i class="fa fa-comment text-info"></i></div>
        </div>
        <input type="text" class="form-control" id="nombre" name="nombre"
        placeholder="Name" formControlName="email">                          </div>
    </div> -->
          <div class="card-body">
            <!-- <div class="form-group">
      <div class="input-group mb-2">
        <div class="input-group-prepend">
          <div class="input-group-text"><i class="fa fa-comment text-info"></i></div>
        </div>
        <input type="text" class="form-control" id="diseaseAge" name="diseaseAge"
        placeholder="Disease Age" formControlName="diseaseAge">                            </div>
    </div> -->
<!-- 
            <div class="form-group">
              <label for="exampleFormControlSelect1">Disease</label>
              <select class="form-control" formControlName="disease" (change)="diseaseschangeevent($event)">
                <option value=""></option>
                <option *ngFor="let opt of diseasListData" [value]="opt.diseaseName">{{opt.diseaseName}}</option>
              </select>
            </div> -->


            <div class="form-group">
              <angular2-multiselect [data]="diseasListData" [(ngModel)]="selectedItems" [settings]="settings"
                (onSelect)="onDiseasesItemSelect($event)" (onDeSelect)="OnDiseasesItemDeSelect($event)"
                (onSelectAll)="onDiseasesSelectAll($event)" (onDeSelectAll)="onDiseasesDeSelectAll($event)" formControlName="diseasesData"
                style="width: 89%;">
              </angular2-multiselect>
            </div>



            <div class="form-group" *ngIf="selectedItems.length">
              <label for="exampleFormControlSelect1">Doctor</label>
              <select class="form-control" formControlName="doctorName" (change)="doctorChangeEvent($event)">
                <option value=""></option>
                <option *ngFor="let opt of tempfilterDoctorListData" [value]="opt.name">{{opt.name}}</option>
              </select>
            </div>

            <div *ngIf="getImageValue">
              <div style="width: 60%; float: left;">
                <img width="140" class="otpPopup-img" [src]="getImageValue" alt="passwordsetImg">
              </div>
              <div style="width: 40%; float:right;">
                <b> Dr. {{newArray1[0].name}}</b><br>
                <a> {{newArray1[0].qualification}}</a><br>
                <a>&#8377; </a><b>{{newArray1[0].charges.toLocaleString('en-IN')}}</b><br>
              </div>
            </div>

            <div class="form-group" [hidden]="f.doctorName.value==''">
              <div class="input-group mb-2">
                <div class="input-group-prepend">
                  <div class="input-group-text"><i class="fa fa-calendar text-info"></i></div>
                </div>
                <input class="form-control" (onChange)="datechange()" type="text" [dpDayPicker]="dayPickerConfig" [theme]="'dp-material'"
                  formControlName="appointmentDate" [mode]="'day'" [displayDate]="displayDate"
                  placeholder="Appointment Date" />
              </div>
            </div>


            <div class="buttonSection" [hidden]="f.doctorName.value=='' || f.appointmentDate.value==''">
              <div class="text-center">
                <h4 class="bookappointmentbtn">
                  <input type="button" [disabled]="disableAvailableTimeSlotBtn"
                    style="color: white; background-color: #1589d8c7;" value="AvailableTimeSlot"
                    (click)="Get_AppointmentsByDocID()"> </h4>
              </div>
            </div>

            <div class="form-group" [hidden]="!visibleTimeSlot">
              <label for="exampleFormControlSelect1">Time Slot</label>
              <select class="form-control" formControlName="timeSlot">
                <option value=""></option>
                <option *ngFor="let opt of filterTimeSlotDataArray" [disabled]="opt.isSlotBooked"
                  [ngStyle]="{  'color': opt.isSlotBooked ? 'red': 'black' }" [value]="opt.id">{{opt.isSlotBooked? opt.name+ '  Slot Full': opt.name}}</option>
              </select>
            </div>





          </div>
        </div>

      </div>







    </ad-modal-body>
    <ad-modal-footer>
      <div class="buttonSection">
        <div class="text-center">
          <h4 class="bookappointmentbtn"><i class="fa fa-medkit" style="margin-right: 20px;"></i><input type="submit"
              style="color: white; background-color: #1589d8c7;" value="Save"> </h4>
          <!-- <i class="fa fa-medkit"></i>    <input type="submit" style="width: 200px;" value="✔️ &nbsp;&nbsp;Save" class="btn btn-info btn-block rounded-0 py-2"> -->
        </div>
        <!-- <button class="primartButton" type="submit">Send OTP</button>
          <button class="secondryButton" type="reset" (click)="CloseModal()">Cancel</button> -->
      </div>
    </ad-modal-footer>

  </ad-modal>

</form>

<div *ngIf="showpatientformpopup">
  <app-patientprofile [calledFrom]="'frombookappointmentpopup'" [showModal]="showpatientformpopup"
    [getpatientprofileid]="getpatientprofileid" (ClosePopup)="closePatientProfilePopup()"
    (patientProfileResponseReturn)="patientProfileResponseReturn($event)"> </app-patientprofile>
</div>